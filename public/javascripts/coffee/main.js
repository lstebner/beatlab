(function(){var t,n,e=[].slice,r=function(t,n){function e(){this.constructor=t}for(var r in n)i.call(n,r)&&(t[r]=n[r]);return e.prototype=n.prototype,t.prototype=new e,t.__super__=n.prototype,t},i={}.hasOwnProperty;World.Widget=function(){function t(t,n){this.opts=null!=n?n:{},this.container=$(t),this.key_bindings=[],this.global_key_bindings=[],this.setup()}return t.init=function(t,n){return null==n&&(n={}),this._instances||(this._instances=[]),this._instances.push(new this(t,n))},t.prototype.trigger=function(){var t,n,r;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],(r=this.container).trigger.apply(r,[n].concat(e.call(t)))},t.prototype.on=function(t,n){return this.container.length?this.container.on(t,n):console.error("event attached to widget with no container")},t.prototype.before_setup=function(){return 1},t.prototype.ready=function(){return 1},t.prototype.setup_events=function(){return 1},t.prototype.dispatch=function(t,n){return this.on(t,function(t){return function(e){var r,i,o,s,u;r=$(e.target),u=[];for(o in n)i=n[o],r.is(o)||r.hasClass(""+o)?(s=i.apply(t,[r,e]),s?u.push(e.preventDefault()):u.push(void 0)):u.push(void 0);return u}}(this))},t.prototype.setup=function(){return this.should_render=!1,this.before_setup(),this.setup_events(),this.setup_key_handlers(),this.ready(),this.render()},t.prototype.bind_key=function(t,n,e){return null==e&&(e=!1),_.isArray(t)||(t=[t]),e?this.global_key_bindings.push([t,n]):this.key_bindings.push([t,n])},t.prototype.setup_key_handlers=function(){var t;return t=function(t){return function(n,e,r){var i,o,s;for(o=0,s=e.length;s>o;o++)if(i=e[o],_.indexOf(i[0],n)>-1)return i[1].call(t,r);return!1}}(this),_.isEmpty(this.key_bindings)||this.container.on("keydown",function(n){return function(e){var r;return r=t(e.keyCode,n.key_bindings,e),console.log("prevent",r),r?e.preventDefault():void 0}}(this)),_.isEmpty(this.global_key_bindings)?void 0:$(document.body).on("keydown",function(n){return function(e){var r;return r=t(e.keyCode,n.global_key_bindings,e),r?e.preventDefault():void 0}}(this))},t.prototype.render=function(){return this.should_render?(this.should_render=!1,!0):void 0},t}(),n={},t=function(){function t(t){var n;this.debug=null!=t?t:!1,("undefined"==typeof n||null===n)&&(n=[]),this.setup_events()}return t.prototype.setup_events=function(){return $("body").on("click","[data-track-click-event]",function(t){return function(n){return t.event($(t).data("track-click-event"))}}(this))},t.prototype.track_event=function(t,n,e,r){var i,o,s,u;if(s=["_trackEvent"],_.isArray(t))for(i=0,o=t.length;o>i;i++)u=t[i],s.push(u);else t&&s.push(t),n&&s.push(n),e&&s.push(e),r&&s.push(r);return _gaq.push(s),this.debug?console.log(s):void 0},t.prototype.event=function(t){return _.has(n,t)?this.track_event(n[t]):void 0},t}(),$(function(){return World.event_tracker=new t(1)}),World.Home=function(t){function n(){return n.__super__.constructor.apply(this,arguments)}return r(n,t),n.prototype.before_setup=function(){var t,n,e,r,i,o;for(this.overlay=$(".overlay").hide(),this.showcase=new Showcase(this.container.find("#showcase"),this.opts),this.contact_form=this.container.find("#contact-form"),this.contact_submit=this.contact_form.find("input[type=submit]"),i=this.container.find("a"),o=[],e=0,r=i.length;r>e;e++)n=i[e],t=$(n),t.attr("href").search(new RegExp("http(|s)://"))>-1?o.push(t.attr("target","_blank")):o.push(void 0);return o},n.prototype.setup_events=function(){return this.dispatch("click",{submit_btn:function(t){return function(n){return t.submit_contact_form()}}(this)}),this.bind_key(13,function(t){return function(n){return $(n.target).is("textarea")?!1:t.submit_contact_form()}}(this))},n.prototype.reset_contact_form=function(){return this.contact_form.find(".alert").fadeOut(300),this.contact_form.find("input[type=text],textarea").val(""),this.contact_submit.val("Send").removeClass("disabled")},n.prototype.contact_form_errors=function(t){return _.isEmpty(t.name)?"Name is required":_.isEmpty(t.email)?"Email is required":_.isEmpty(t.message)?"Message is required":!1},n.prototype.submit_contact_form=function(){var t,n,e,r;if(!this.contact_submit.is(".disabled"))return this.contact_submit.text("Sending...").addClass("disabled"),n={name:this.contact_form.find("input[name=name]").val(),email:this.contact_form.find("input[name=email]").val(),message:this.contact_form.find("textarea[name=message]").val()},t=this.container.find(".alert"),e=function(n){return function(e,r){return e?(t.fadeIn().removeClass("alert-success").addClass("alert-error").children("p").text(r),n.contact_submit.val("Try Again")):(t.fadeIn().removeClass("alert-error").addClass("alert-success").children("p").text(r),setTimeout(function(){return t.fadeOut(300),n.reset_contact_form()},1e4)),n.contact_submit.removeClass("disabled")}}(this),(r=this.contact_form_errors(n))?e(!0,r):(this.contact_submit.val("Sending...").addClass("disabled"),this.send_message(n,function(t){return function(t,n){return e(t,n)}}(this)))},n.prototype.send_message=function(t,n){return null==n&&(n=null),$.ajax({type:"post",url:"/contact-submit",data:t,dataType:"json",success:function(t){return function(t){return t.error?"function"==typeof n?n(!0,t.message):void 0:"function"==typeof n?n(!1,"Message sent!"):void 0}}(this)})},n}(World.Widget)}).call(this);